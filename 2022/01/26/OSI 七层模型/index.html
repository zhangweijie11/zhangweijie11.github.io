

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="zhangweijie">
  <meta name="keywords" content="">
  
    <meta name="description" content="互联网的本质就是一系列的网络协议，这个协议就叫OSI协议（一系列协议），按照功能不同，分工不同，人为的分层七层。实际上这个七层是不存在的。没有这七层的概念，只是人为的划分而已。区分出来的目的只是让你明白哪一层是干什么用的。 每一层都运行不同的协议。协议是干什么的，协议就是标准。 实际上还有人把它划成五层、四层。 七层划分为：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。 五层划">
<meta property="og:type" content="article">
<meta property="og:title" content="OSI 七层模型">
<meta property="og:url" content="http://example.com/2022/01/26/OSI%20%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B/index.html">
<meta property="og:site_name" content="ffreedom">
<meta property="og:description" content="互联网的本质就是一系列的网络协议，这个协议就叫OSI协议（一系列协议），按照功能不同，分工不同，人为的分层七层。实际上这个七层是不存在的。没有这七层的概念，只是人为的划分而已。区分出来的目的只是让你明白哪一层是干什么用的。 每一层都运行不同的协议。协议是干什么的，协议就是标准。 实际上还有人把它划成五层、四层。 七层划分为：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。 五层划">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081048799.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081048140.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081048210.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081048217.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049431.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049462.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049503.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049473.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049002.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049603.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049458.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049955.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049781.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049974.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049074.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049187.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049366.png">
<meta property="og:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049759.png">
<meta property="article:published_time" content="2022-01-26T02:58:31.000Z">
<meta property="article:modified_time" content="2022-03-02T14:28:13.203Z">
<meta property="article:author" content="zhangweijie">
<meta property="article:tag" content="操作系统">
<meta property="article:tag" content="网络知识">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081048799.png">
  
  
  <title>OSI 七层模型 - ffreedom</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"J0a9dxcs8XGWWoDR84hMXA01-gzGzoHsz","app_key":"WbImCRYLaCb0AN9W178IBFBs","server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.0.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Ffreedom</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="OSI 七层模型">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-01-26 10:58" pubdate>
        2022年1月26日 上午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      7.6k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      64 分钟
    </span>
  

  
  
    
      <!-- LeanCloud 统计文章PV -->
      <span id="leancloud-page-views-container" class="post-meta" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="leancloud-page-views"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">OSI 七层模型</h1>
            
            <div class="markdown-body">
              <p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081048799.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081048140.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081048210.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>互联网的本质就是一系列的网络协议，这个协议就叫OSI协议（一系列协议），按照功能不同，分工不同，人为的分层七层。实际上这个七层是不存在的。没有这七层的概念，只是人为的划分而已。区分出来的目的只是让你明白哪一层是干什么用的。</p>
<p>每一层都运行不同的协议。协议是干什么的，协议就是标准。</p>
<p>实际上还有人把它划成五层、四层。</p>
<p>七层划分为：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。</p>
<p>五层划分为：应用层、传输层、网络层、数据链路层、物理层。</p>
<p>四层划分为：应用层、传输层、网络层、网络接口层。</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081048217.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>物理层：</p>
<p>字面意思解释：物理传输、硬件、物理特性。在深圳的你与北京的朋友聊天，你的电脑必须要能上网，物理体现是什么？是不是接一根网线，插个路由器，北京的朋友那边是不是也有根网线，也得插个路由器。也就是说计算机与计算机之间的通信，必须要有底层物理层方面的连通，就类似于你打电话，中间是不是必须得连电话线。</p>
<p>中间的物理链接可以是光缆、电缆、双绞线、无线电波。中间传的是电信号，即010101…这些二进制位。</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049431.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>底层传输的010010101001…这些二级制位怎么才能让它有意义呢？</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049462.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>要让这些010010101001…有意思，人为的分组再适合不过了，8位一组，发送及接收都按照8位一组来划分。接收到8位为一组的话，那么就可以按照这8位数来做运算。如果没有分组，对方接收的计算机根本就不知道从哪一位开始来做计算，也解析不了收到的数据。我发了16位你就按照16位来做计算吗？我发100位你就按照100位做计算吗？没什么意义是吧。因此要想让底层的电信号有意义，必须要把底层的电信号做分组。我做好8位一组，那么我收到数据，我就知道这几个8位做一组，这几个8位做一组。那么每个8位就可以得到一个确定的数。分组是谁干的活呢？物理层干不了，这个是数据链路层干的。</p>
<p>数据链路层</p>
<p>早期的时候，数据链路层就是来对电信号来做分组的。以前每个公司都有自己的分组方式，非常的乱，后来形成了统一的标准（标准就是协议），即以太网协议Ethernet。</p>
<p>Ethernet规定</p>
<p>一组电信号称之为一个数据包，或者叫做一个“帧”</p>
<p>每一数据帧分成：报头head和数据data两部分</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049503.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>head包含：（固定18个字节）</p>
<p>发送者（源地址，6个字节）<br>接收者（目标地址，6个字节）<br>数据类型（6个字节）<br>data包含：（最短46字节，最长1500字节）</p>
<p>数据包的具体内容<br>head长度+data长度&#x3D;最短64字节，最长1518字节，超过最大限制就分片发送。</p>
<p>这就像写信，发送者的地址（源地址）就是你家的地址，接收者地址（目标地址）就是对方的收信地址，你家的路由器就相当于邮局。其实在计算机通信中的源地址和目标地址指的是mac地址。</p>
<p>Mac地址的由来：</p>
<p>head中包含的源和目标地址由来：Ethernet规定接入Internet的设备都必须具备网卡，发送端的和接收端的地址便是指网卡的地址，即Mac地址。</p>
<p>每块网卡出厂时都被烧录上一个实际上唯一的Mac地址，长度为48位2进制，通常由12位16进制数表示，（前六位是厂商编码，后六位是流水线号）</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049473.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>有了mac地址以后，计算机就可以通信了，假设一个教室就是一个局域网（隔离的网络），这个教室里面有几台计算机，计算机的通信和人的通信是一个道理，把教室里面的人都比作一个个计算机，假设教室里面的人都是瞎子，其实计算机就是瞎子的，计算机通信基本靠吼，现在我要找教室里面的飞哥要战狼2的片，然后我就吼一声，说我要找飞哥要战狼2的片，战狼2的片就属于我的数据，但是我在发的时候我是不是要标识我是谁，我要找谁，我是谁就是我的mac地址，我要找谁就是飞哥的mac地址，这两个地址做数据包的头部，再加上数据战狼2的片就构成了一个数据帧。</p>
<p>这个数据包封装好以后就往外发，到物理层以后就全部转成二级制，往外发是怎么发的呢？就是靠吼。即“我是Edison，我找飞哥要战狼2的片”。这么吼了一嗓子以后，全屋子的人都能听到，这就是广播。</p>
<p>计算机底层，只要在一个教室里（一个局域网），都是靠广播的方式，吼。</p>
<p>局域网的理解：什么是互联网，互联网就是由一个个局域网组成，局域网内的计算机不管是对内还是对外都是靠吼，这就是数据链路层的工作方式—–广播。</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049002.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>广播出去以后，所有人都听得见，所有人都会拆开这个包，读发送者是谁，接收者是谁，只要接收者不是自己就丢弃掉。对计算机来说，它会看自己的Mac地址，飞哥收到以后，他就会把片发给我，发送回来同样采用广播的方式了，靠吼。</p>
<p>同一个教室（同一个局域网）的计算机靠吼来通信，那不同教室的计算机又如何？</p>
<p>比如说局域网1的pc1与局域网2的pc10如何通信？你在教室1（局域网1）吼，教室2（局域网2）的人肯定是听不见的。这就是跨网络进行通信，数据链路层就解决不了这个问题了，这就得靠网络层出面了。</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049603.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>在讲网络层之前，其实基于广播的这种通信就可以实现全世界通信了，你吼一声，如果全世界是一个局域网，全世界的计算机肯定可以听得见，从理论上似乎行得通，如果全世界的计算机都在吼，你想一想，这是不是一个灾难。因此，全世界不能是一个局域网。于是就有了网络层。</p>
<p>网络层：</p>
<p>网络层定义了一个IP协议，</p>
<p>你想，我是这个教室的一个学生，我想找隔壁教室一个叫老王的学生，我也不认识老王，那怎么办，我吼？老王在另外一个教室肯定是听不到的。找教室的负责人，这个教室的负责人就负责和隔壁教室的负责人说话，说我们教室的有个学生要找你们教室的老王。往外传的东西交给负责人就可以了，内部的话上面已经提到，通过广播的方式，对外的东西广播失效。教室的负责人就是网关，网关即网络关口的意思。</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049458.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>Mac地址是用来标识你这个教室的某个位置，IP地址是用来标识你在哪个教室（哪个局域网）。你要跨网络发包你是不是要知道对方的IP地址，比如你要访问百度，你肯定得知道百度服务器的IP地址。计算机在发包前，会判断你在哪个教室，对方在哪个教室，如果在一个教室，基于mac地址的广播发包就OK了；如果不在一个教室，即跨网络发包，那么就会把你的包交给教室负责人（网关）来转发。Mac地址及IP地址唯一标识了你在互联网中的位置。</p>
<p>数据链路层中会把网络层的数据包封装到数数据链路层的数据位置，然后再添加上自己的包头，再发给物理层，物理层发给网关，网关再发给对方教室的网关，对方教室的网关收到后在那个教室做广播。</p>
<p>在数据链路层看，数据封装了两层，跟玩俄罗斯套娃有点类似，一层套了一层。</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049955.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>最终变成</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049781.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>现在来看另一个问题，在吼之前怎么知道对方的Mac地址？这就得靠ARP协议。</p>
<p>ARP协议的由来：在你找飞哥要片之前，你的先干一件事，想办法知道飞哥的Mac地址。即你的机器必须先发一个ARP包出去，ARP也是靠广播的方式发，ARP发送广播包的方式如下：</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049974.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>局域网中怎么获取对方的Mac地址：</p>
<p>肯定要知道对方的IP地址，这是最基本的，就像你要访问百度，肯定得知道百度的域名，域名就是百度的IP地址。自己的IP可以轻松获得，自己的Mac也轻松获取，目标Mac为12个F，我们叫广播地址，表达的意思是我想要获取这个目标IP地址172.16.10.11的机器的Mac地址。Mac为12个F代表的是一种功能，这个功能就是获取对方的MAC地址，计算机的Mac永远不可能是12个F。假设是在本教室广播，一嗓子吼出去了，所有人开始解包，只有IP地址是172.16.10.11的这个人才会返回他的Mac地址，其他人全部丢弃。发回来源Mac改成飞哥自己的Mac地址，同时把飞哥的Mac地址放在数据部分。</p>
<p>跨网络怎么获取对方的Mac地址：</p>
<p>通过IP地址区分，计算机运算判断出飞哥不在同一个教室，目标IP就变成了网关的IP了。网关的IP在计算机上配死了，可以轻松获取。</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049074.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049187.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>这样网关就会把它的Mac地址返回给你，然后正常发包</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049366.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>网关帮你去找飞哥，但对用户来说，我们根本就感觉不到网关的存在。</p>
<p>传输层</p>
<p>传输层的由来：网络层的ip帮我们区分子网，以太网层的mac帮我们找到主机，然后大家使用的都是应用程序，你的电脑上可能同时开启qq，暴风影音，等多个应用程序，</p>
<p>那么我们通过ip和mac找到了一台特定的主机，如何标识这台主机上的应用程序，答案就是端口，端口即应用程序与网卡关联的编号。</p>
<p>传输层功能：建立端口到端口的通信</p>
<p>补充：端口范围0-65535，0-1023为系统占用端口</p>
<p>tcp协议：</p>
<p>可靠传输，TCP数据包没有长度限制，理论上可以无限长，但是为了保证网络的效率，通常TCP数据包的长度不会超过IP数据包的长度，以确保单个TCP数据包不必再分割。</p>
<p>以太网头    ip 头                  tcp头                  数据                                                    </p>
<p>udp协议：</p>
<p>不可靠传输，”报头”部分一共只有8个字节，总长度不超过65,535字节，正好放进一个IP数据包。</p>
<p>以太网头    ip头                         udp头                               数据              </p>
<p>应用层</p>
<p>应用层由来：用户使用的都是应用程序，均工作于应用层，互联网是开发的，大家都可以开发自己的应用程序，数据多种多样，必须规定好数据的组织形式 。</p>
<p>应用层功能：规定应用程序的数据格式。</p>
<p>例：TCP协议可以为各种各样的程序传递数据，比如Email、WWW、FTP等等。那么，必须有不同协议规定电子邮件、网页、FTP数据的格式，这些应用程序协议就构成了”应用层”。</p>
<p><img src="https://zwj-typora-ipic.oss-cn-beijing.aliyuncs.com/img/202112081049759.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h1 id="七层协议详解"><a href="#七层协议详解" class="headerlink" title="七层协议详解"></a>七层协议详解</h1><p>我们都知道互联网的本质是一系列的网络协议，这个协议就叫做OSI协议。按照功能不同分工不同，认为的分为七层。实际上这七层是并不存在的，也就是说没有这些概念，而我们今天提到的七层概念，只是人为的划分而已。目的只是为了让大家更好地理解这些都是用来做什么的。<br>从专业的角度来说，OSI就是一个开放的通信系统互联参考模型，也是一个定义的很好的协议规范。OSI模型有7层结构，每层都可以有几个子层。OSI的7层从下到上分别是7-应用层、6-表示层、5-会话层、4-传输层、3-网络层、2-数据链路层、1-物理层。</p>
<h2 id="第1层-物理层"><a href="#第1层-物理层" class="headerlink" title="第1层 物理层"></a>第1层 物理层</h2><p>是参考模型的最低层。该层是网络通信的数据传输介质，由连接不同结点的电缆与设备共同构成。主要跟功能是：利用传输介质为数据链路层提供物理连接，负责处理数据传输并监控数据出错率，以便数据流的透明传输。</p>
<h2 id="第2层-数据链路层"><a href="#第2层-数据链路层" class="headerlink" title="第2层 数据链路层"></a>第2层 数据链路层</h2><p>是参考模型的第二层。主要功能是：在物理层提供的服务基础上，在通信的实体间建立数据链路连接，传输以“帧”为单位的数据包，并采用差错控制与流量控制方法，使有差错的物理线路变成无差错的数据链路。</p>
<h2 id="第3层-网络层"><a href="#第3层-网络层" class="headerlink" title="第3层 网络层"></a>第3层 网络层</h2><p>是参考模型的第三层。主要功能是：为数据在节点之间传输创建逻辑链路，通过路由选择算法为分组通过通信子网选择最适当的路径，以及实现拥塞控制、网络互连等功能。</p>
<h2 id="第4层-传输层"><a href="#第4层-传输层" class="headerlink" title="第4层 传输层"></a>第4层 传输层</h2><p>是参考模型的第四层。主要功能是：向用户提供可靠地端到端服务，处理数据包错误、数据包次序，以及其他一些关键传输问题。传输层向高层屏蔽了下层数据通信的细节。因此，它是计算机通信体系结构中关键的一层。</p>
<h2 id="第5层-会话层"><a href="#第5层-会话层" class="headerlink" title="第5层 会话层"></a>第5层 会话层</h2><p>是参考模型的第五层。主要功能是：负责维扩两个结点之间的传输连接，以便确保点到点传输不中断，以及管理数据交换等功能。</p>
<h2 id="第6层-表示层"><a href="#第6层-表示层" class="headerlink" title="第6层 表示层"></a>第6层 表示层</h2><p>是参考模型的第六层。主要功能是：用于处理在两个通信系统中交换信息的表示方法，主要包括数据格式变换、数据加密与解密、数据压缩与恢复等功能。</p>
<h2 id="第7层-应用层"><a href="#第7层-应用层" class="headerlink" title="第7层 应用层"></a>第7层 应用层</h2><p>是参考模型的最高层。主要功能是：为应用软件提供了很多服务，比如文件服务器、数据库服务、电子邮件与其他网络软件服务。</p>
<h1 id="OSI历史"><a href="#OSI历史" class="headerlink" title="OSI历史"></a>OSI历史</h1><p>忘记告诉大家，这个协议是从下到上倒推出来的。<br>我们来回顾一下这段有趣的历史吧~<br>OSI模型最初是因为美国人的两台机器之间有进行通信的需求。</p>
<p><strong>需求1</strong>：两个硬件之间如何进行通信，具体就是一台发比特流，另一台能够收到。于是就有了物理层：主要是定义设备标准，如网线的额接口类型、管线的接口类型、各种传输介质的传输速率等。它的主要租用是传输比特流，就是从1&#x2F;0转化为电流强弱来进行传输，到达目的之后再转化为1&#x2F;0，也就是我们常说的数模转换。这一层的数据是比特。</p>
<p><strong>需求2</strong>：现在通过电线我能发数据流了，但是我还是希望能通过无线电波，通过其他介质来进行传输。然后我还要保证传输过去的比特流是正确的，需要由纠正错误的功能。</p>
<p><strong>数据链路层</strong>：定义了如何让格式化数据进行传输，以及如何让控制对物理介质的访问。这一层通常还提供错误检测和纠正，以确保数据的可靠传输。</p>
<p><strong>需求3</strong>：现在我能发正确的比特流数据到另一台计算机了，但是当我发大量数据的时候，可能需要很长时间，例如：一个视频格式的，网络会中断好多次，实际上，即使有了物理层和数据链路层，网络还是经常中断，只是中断的时间是毫秒级别的。</p>
<p>那么，我还需要保证传输大量文件时的准确性。于是，我要对发出去的数据进行封装。就像发快递一样，一个个发送。</p>
<p>于是，发明了<strong>传输层</strong>（传输层在OSI模型中，是在网络层面上）。</p>
<p>比如TCP，是用于发送大量数据的，我发出去一万个包，另一台电脑就需要告诉我是否接收到一万个包，如果缺少3个包，就告诉我是第1001&#x2F;234&#x2F;8888个包丢了，那我再发一次。这样，就能保证对方把这个视频完整接收了。</p>
<p>例如UDP，适用于发送少量数据的。我发20个包出去，一般不会丢包，所以 ，我不管你收到多少，在多人互动游戏中，也经常受到UDP协议，因为一般都是简单的额信息，而且有广播的需求。如果用TCP，效率就会很低，因为它会不停地告诉主机我收到20个包，或者18个包，再发我两个！如果同时有1万台计算机都这样做，那么用TCP反而会降低效率，还不如用UDP，主机发出去就算了，丢几个包就卡一下，算了，下次再发包更新。</p>
<p>TCP协议是会绑定IP和端口的协议，下面会介绍IP协议。</p>
<p><strong>需求4</strong>：传输层是解决了打包的问题。但是如果我有多台计算机，怎么能找到我要发的那台？或者A要给F发信息，中间要经过B&#x2F;C&#x2F;D&#x2F;E，但是中间还有好多节点，如K&#x2F;J&#x2F;Z&#x2F;Y.我怎么选择最佳路径？这就是路由要做的事情。</p>
<p>于是，发明了<strong>网络层</strong>，也就是路由器，交换那些具有寻址功能的设备所实现的功能。这一层定义的是IP复制，通过IP地址寻址，所以产生了协议。</p>
<p><strong>需求5</strong>：现在已经能够给指定计算机发送正确的封装过的信息了，但是用户级别的体验并不是很好？难道我每次都要调用TCP去打包，然后调用IP协议去找路由，自己去发？当然不行，所以我们要建立一个自动收发包，自动寻址的功能。</p>
<p>于是发明了<strong>会话层</strong>。会话层的作用就是建立和管理应用程序之间的通信。</p>
<p><strong>需求6</strong>：现在我能保证应用程序自动收发包和寻址了，但是我要用Linux给window发包，两个系统语法不一致，就像安装包一样，EXE不能在Linux下用，shell在window也也是不能直接运行的。</p>
<p>于是需要<strong>表示层</strong>，帮我们解决不同系统之间的通信语法问题。</p>
<p><strong>需求7</strong>：现在所有必要条件都准备好了，我们可以写个Android程序，web程序去实现需求吧。</p>
<p><strong>补充</strong>：不知道有没有小伙伴熟悉<strong>Socket</strong>，这不是一个协议，而是一个通信模型。其实它最初是伯克利加州分校软件研究所，简称BSD发明的，主要是一台电脑两个进程之间进行通信，然后把它用到两台电脑的进程间通信。所以，可以把它简单理解为进程间通信，不是什么高级的东西，主要是这么做的：A发包：发请求包给某个已经绑定的端口；收到B的允许后，正式开始发送，发送完了，高速B要断开连接；收到断开允许后，马上断开，然后发送已经断开信息给B。</p>
<p>B收包：绑定端口和IP，然后在这个端口监听接收到A的请求，发给A，并做好接收准备，主要就是清理缓存等待接收新数据；然后正式接收，接收到断开请求，并允许断开，确认断开后，继续监听其他请求。</p>
<p>换句话说，socket就是I&#x2F;O操作，socket并不仅限于网络通信。在网络通信中，它涵盖了网络层、传输层、会话层、表示层、应用层。</p>
<h1 id="OSI七层协议中每一层的特征"><a href="#OSI七层协议中每一层的特征" class="headerlink" title="OSI七层协议中每一层的特征"></a>OSI七层协议中每一层的特征</h1><h2 id="第一层：物理层"><a href="#第一层：物理层" class="headerlink" title="第一层：物理层"></a>第一层：物理层</h2><p>机械性能：接口的形状，尺寸的大小，引脚的数目和排列方式等；</p>
<p>电气性能：接口规定信号的电压、电流、阻抗、波形、速率好平衡特性等；</p>
<p>工程规范：接口引脚的意义、特性、标准。</p>
<p>工作方式：确定数据位流的传输方式，如：半双工、全双工等。</p>
<p>物理层协议：美国电子工业协会（EIA）的RS232&#x2F;RS422&#x2F;RS423等；</p>
<p>国际电报电话咨询委员会（CCITT）的X.25&#x2F;X.21等；</p>
<p>物理层的数据单位是位（BIT），典型设备时集线器HUB。</p>
<p>这主要是和硬件有关，与软件关系不大。</p>
<h2 id="第二层：链路层"><a href="#第二层：链路层" class="headerlink" title="第二层：链路层"></a>第二层：链路层</h2><p>链路层屏蔽传输介质的物理特征，使数据可靠传送。</p>
<p>内容包括介质访问控制、连接控制、顺序控制、流量控制、差错控制和仲裁协议等。</p>
<p>链路层协议有：协议有面向字符的通讯协议（PPP）和面向位的通讯协议（HDLC）。</p>
<p>仲裁协议：CSMA&#x2F;CD(Carrier Sense Multiple Access with Collision Detection)、Token Bus、Token Ring</p>
<p>链路层数据单位是帧，实现对MAC地址的访问，典型设备是交换机SWITCH。</p>
<h2 id="第三层：网络层"><a href="#第三层：网络层" class="headerlink" title="第三层：网络层"></a>第三层：网络层</h2><p>网络层管理连接方式和路由选择。</p>
<p>连接方式：虚电路和数据报服务。</p>
<p>虚电路是面向连接的，数据通讯一次路由，通过会话建立的一条通路。数据报是非连接的，每个数据报都有路由能力。网络层的数据单位是包，使用的是IP地址，典型设备时路由器Router。</p>
<p>这一层可以进行流量控制，但流量控制更多的是使用第二层或第四层。</p>
<h2 id="第四层：传输层"><a href="#第四层：传输层" class="headerlink" title="第四层：传输层"></a>第四层：传输层</h2><p>提供端到端的服务，可以实现流量控制、负载均衡。</p>
<p>传输层信息包括端口、控制字和校验和。</p>
<p>传输层协议主要是TCP和UDP。</p>
<p>传输层位于OSI的第四层，这层使用的设备时主机本身。</p>
<h2 id="第五层：会话层"><a href="#第五层：会话层" class="headerlink" title="第五层：会话层"></a>第五层：会话层</h2><p>会话层主要内容时通过 绘画进行身份验证、绘画管理和确定通讯方式。一旦建立连接，会话层的任务就是管理会话。</p>
<h2 id="第六层：表示层"><a href="#第六层：表示层" class="headerlink" title="第六层：表示层"></a>第六层：表示层</h2><p>表示层主要是解释通讯数据的意义，如代码转换、格式变换等，使不同的终端可以表示。</p>
<p>还包括加密与解密、压缩与解压等。</p>
<h2 id="第七层：应用层"><a href="#第七层：应用层" class="headerlink" title="第七层：应用层"></a>第七层：应用层</h2><p>应用层应该是直接面向用户的程序或服务，包括系统程序和用户程序，比如www、FTP、DNS、POP3和SMTP等都是应用层服务。</p>
<p>数据再发送时是数据从应用层至物理层的一个大包的过程，接收时是数据从物理层至应用层的一个解包过程。</p>
<p>从功能角度可以分为三组：1&#x2F;2层解决网络通信问题，3&#x2F;4层解决传输问题，5&#x2F;6&#x2F;7层处理对应用进程的访问。</p>
<p>从控制角度可分为二组：1&#x2F;2&#x2F;3层是通信子网，4&#x2F;5&#x2F;6&#x2F;7是主机控制层。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/jiPMUk6zUdOY6eKxAjNDbQ">https://mp.weixin.qq.com/s/jiPMUk6zUdOY6eKxAjNDbQ</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Uf42QEL6WUSHOwJ403FwOA">https://mp.weixin.qq.com/s/Uf42QEL6WUSHOwJ403FwOA</a></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/">网络知识</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a>
                    
                      <a class="hover-with-bg" href="/tags/%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86/">网络知识</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/01/27/%E5%86%85%E6%A0%B8%E6%80%81%E5%92%8C%E7%94%A8%E6%88%B7%E6%80%81%E8%A7%A3%E6%9E%90/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">内核态和用户态解析</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/01/19/Git%20%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E5%8F%8A%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/">
                        <span class="hidden-mobile">Git 常见错误及解决办法</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"J0a9dxcs8XGWWoDR84hMXA01-gzGzoHsz","appKey":"WbImCRYLaCb0AN9W178IBFBs","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          Fluid.plugins.initFancyBox('#valine .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud 统计PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            总访问量 
            <span id="leancloud-site-pv"></span>
             次
          </span>
      
      
        <!-- LeanCloud 统计UV -->
        <span id="leancloud-site-uv-container" style="display: none">
            总访客数 
            <span id="leancloud-site-uv"></span>
             人
          </span>
      

    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  




  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>












  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
